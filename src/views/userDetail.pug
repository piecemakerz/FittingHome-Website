extends layouts/main
include mixins/postBlock
include mixins/processTable
include mixins/modelTable

block content
    .user-profile
        if loggedUser && user.id === loggedUser.id
            .user-profile__info
                .user-profile__header
                    img.u-avatar(src=user.avatarUrl)
                    h4.profile__username=user.name
                .user-profile__btns
                    a(href=`/users${routes.editProfile}`)
                        button âœï¸ Edit Profile
                    a(href=`/users${routes.changePassword}`)
                        button ğŸ”’ Change Password
                    a#withdraw(href=routes.withdraw)
                        button âŒ Withdraw
            .user-profile__table
                .user-profile__processes.table-wrapper
                    div.tableName ëª¨ë¸ ìƒì„± í˜„í™©
                    div.tableDescription * ëª¨ë“  ëª¨ë¸ ìƒì„± í˜„í™©ì€ í•˜ë£¨ê°€ ì§€ë‚˜ë©´ ì‚­ì œë©ë‹ˆë‹¤.
                    +processTable(process)
                .user-profile__models.table-wrapper
                    div.tableName ë‚´ ëª¨ë¸ ëª©ë¡
                    div.tableDescription ë‚´ê°€ ì—…ë¡œë“œ í•˜ê±°ë‚˜ ìƒì„±í•œ ëª¨ë¸ë“¤ì„ ë‹¤ìš´ë¡œë“œ í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    +modelTable(user.models)
        else
            .user-profile__info
                .user-profile__header
                    img.u-avatar(src=user.avatarUrl)
                    h4.profile__username=user.name
    .uploaded-posts
        div.posts__title=`ë‚´ í¬ìŠ¤íŒ… ëª©ë¡: ${user.posts.length}`
        .uploaded-posts__containter
            each item in user.posts
                +postBlock(item)
    script.
        var withdrawBtn = document.getElementById("withdraw");
        withdrawBtn.addEventListener("click", handleWithdrawConfirm, false);

        function handleWithdrawConfirm(event){
            if(!confirm("Are you sure?")){
                event.preventDefault();
            }
        }
        
        